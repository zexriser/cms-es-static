(function(){'use strict';const EnjoyNowApp={config:{breakpoints:{mobile:768,tablet:1024,desktop:1200},animation:{duration:300,easing:'ease-in-out'},themes:{light:'https://cdn.jsdelivr.net/gh/zexriser/cms-es-static@main/enjoynow/assets/css/dark-theme.css',dark:'http://escort-project.test/frontend/themes/enjoynow/assets/css/dark-theme.css'},gallery:{autoAdvanceInterval:5000},scroll:{backToTopThreshold:300}},navigation:{elements:{navToggle:document.querySelector('.mobile-menu-toggle'),navMenu:document.querySelector('.mobile-menu-overlay'),closeBtn:document.querySelector('.mobile-menu-close'),body:document.body},init(){const{navToggle,navMenu,closeBtn,body}=this.elements;if(navToggle&&navMenu){navToggle.addEventListener('click',()=>this.toggleMenu());if(closeBtn){closeBtn.addEventListener('click',()=>this.closeMenu())}
            navMenu.querySelectorAll('a').forEach(link=>{link.addEventListener('click',()=>this.closeMenu())});document.addEventListener('click',(e)=>this.closeMenuOnOutsideClick(e))}},toggleMenu(){const{navMenu,navToggle,body}=this.elements;navMenu.classList.toggle('active');navToggle.classList.toggle('active');body.classList.toggle('mobile-menu-open')},closeMenu(){const{navMenu,navToggle,body}=this.elements;navMenu.classList.remove('active');navToggle.classList.remove('active');body.classList.remove('mobile-menu-open')},closeMenuOnOutsideClick(event){const{navToggle,navMenu}=this.elements;if(!navToggle.contains(event.target)&&!navMenu.contains(event.target)){this.closeMenu()}}},backToTop:{elements:{backToTop:document.querySelector('.back-to-top')},init(){const{backToTop}=this.elements;if(backToTop){window.addEventListener('scroll',()=>this.toggleVisibility());backToTop.addEventListener('click',()=>this.scrollToTop())}},toggleVisibility(){const{backToTop}=this.elements;backToTop.classList.toggle('visible',window.scrollY>EnjoyNowApp.config.scroll.backToTopThreshold)},scrollToTop(){window.scrollTo({top:0,behavior:'smooth'})}},gallerySlider:{init(){document.querySelectorAll('.gallery-slider').forEach(slider=>{const slides=slider.querySelectorAll('.gallery-slide');const prevBtn=slider.parentElement.querySelector('.gallery-nav.prev');const nextBtn=slider.parentElement.querySelector('.gallery-nav.next');let currentSlide=0;const showSlide=(index)=>{slides.forEach(slide=>slide.classList.remove('active'));slides[index].classList.add('active')};const nextSlide=()=>{currentSlide=(currentSlide+1)%slides.length;showSlide(currentSlide)};const prevSlide=()=>{currentSlide=(currentSlide-1+slides.length)%slides.length;showSlide(currentSlide)};if(prevBtn)prevBtn.addEventListener('click',prevSlide);if(nextBtn)nextBtn.addEventListener('click',nextSlide);setInterval(nextSlide,EnjoyNowApp.config.gallery.autoAdvanceInterval)})}},formValidator:{init(){document.querySelectorAll('form').forEach(form=>{form.addEventListener('submit',(e)=>this.validate(e))})},validate(event){event.preventDefault();const form=event.target;const inputs=form.querySelectorAll('input[required], textarea[required]');let isValid=!0;inputs.forEach(input=>{const errorElement=document.getElementById(input.name+'Error');if(errorElement)errorElement.textContent='';if(!input.value.trim()){this.showError(input,'This field is required');isValid=!1}else if(input.type==='email'&&!this.isValidEmail(input.value)){this.showError(input,'Please enter a valid email address');isValid=!1}});if(isValid)this.showSuccess(form);},showError(input,message){const errorElement=document.getElementById(input.name+'Error');if(errorElement)errorElement.textContent=message;input.style.borderColor='var(--error)'},showSuccess(form){const successMessage=document.createElement('div');successMessage.textContent='Thank you! Your message has been sent.';successMessage.style.cssText='background: var(--success); color: white; padding: 1rem; border-radius: 4px; margin-top: 1rem;';form.appendChild(successMessage);setTimeout(()=>{successMessage.remove();form.reset()},3000)},isValidEmail(email){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)}},attributes:{elements:{addAttributeBtn:document.getElementById('addAttribute'),attributesContainer:document.getElementById('attributesContainer')},init(){const{addAttributeBtn,attributesContainer}=this.elements;if(addAttributeBtn&&attributesContainer){addAttributeBtn.addEventListener('click',()=>this.addAttribute());attributesContainer.addEventListener('click',(e)=>this.removeAttribute(e))}},addAttribute(){const{attributesContainer}=this.elements;const newAttribute=document.createElement('div');newAttribute.className='attribute-item';newAttribute.innerHTML=`
                    <input type="text" placeholder="Attribute" class="attribute-key">
                    <input type="text" placeholder="Value" class="attribute-value">
                    <button type="button" class="remove-attribute" aria-label="Remove attribute">√ó</button>
                `;attributesContainer.appendChild(newAttribute)},removeAttribute(event){if(event.target.classList.contains('remove-attribute')){event.target.parentElement.remove()}}},loadMore:{elements:{loadMoreBtn:document.getElementById('loadMore')},init(){const{loadMoreBtn}=this.elements;if(loadMoreBtn){loadMoreBtn.addEventListener('click',()=>this.loadProfiles())}},loadProfiles(){const{loadMoreBtn}=this.elements;loadMoreBtn.textContent='Loading...';setTimeout(()=>{loadMoreBtn.textContent='Load More Profiles'},1000)}},filters:{elements:{filterButtons:document.querySelectorAll('#applyFilters, #clearFilters')},init(){const{filterButtons}=this.elements;filterButtons.forEach(btn=>{btn.addEventListener('click',()=>this.handleFilter(btn))})},handleFilter(btn){if(btn.id==='clearFilters'){document.querySelectorAll('select').forEach(select=>{select.value=''})}}},smoothScroll:{init(){document.querySelectorAll('a[href^="#"]').forEach(anchor=>{anchor.addEventListener('click',(e)=>this.handleScroll(e))})},handleScroll(e){e.preventDefault();const target=document.querySelector(e.currentTarget.getAttribute('href'));if(target){target.scrollIntoView({behavior:'smooth'})}}},cookieBanner:{elements:{cookieBanner:document.querySelector('.cookie-banner')},init(){const{cookieBanner}=this.elements;if(cookieBanner){const acceptBtn=cookieBanner.querySelector('.btn-accept');if(acceptBtn){acceptBtn.addEventListener('click',()=>this.acceptCookies())}
            if(!localStorage.getItem('cookiesAccepted')){cookieBanner.style.display='block';cookieBanner.classList.add('visible')}else{cookieBanner.style.display='none'}}},acceptCookies(){const{cookieBanner}=this.elements;cookieBanner.style.display='none';localStorage.setItem('cookiesAccepted','true')}},profileGallery:{elements:{imageGallery:document.querySelector('.image-gallery'),mainImage:document.getElementById('mainImage'),thumbnails:document.querySelectorAll('.gallery-thumbs img'),prevBtn:document.getElementById('prevImage'),nextBtn:document.getElementById('nextImage')},images:[],init(){const{imageGallery,mainImage,thumbnails,prevBtn,nextBtn}=this.elements;this.images=Array.from(thumbnails).map(thumb=>thumb.getAttribute('data-full'));if(!this.images.length||!imageGallery||!mainImage||!thumbnails.length){if(imageGallery){imageGallery.innerHTML='<p>Galeride g√∂r√ºnt√º bulunmamaktadƒ±r.</p>'}
            return}
            let currentIndex=0;const updateMainImage=(index)=>{if(this.images[index]){mainImage.src=this.images[index];thumbnails.forEach((thumb,i)=>{thumb.classList.toggle('active',i===index)});currentIndex=index}};thumbnails.forEach((thumbnail,index)=>{thumbnail.addEventListener('click',()=>{updateMainImage(index)})});if(prevBtn){prevBtn.addEventListener('click',()=>{const newIndex=(currentIndex-1+this.images.length)%this.images.length;updateMainImage(newIndex)})}
            if(nextBtn){nextBtn.addEventListener('click',()=>{const newIndex=(currentIndex+1)%this.images.length;updateMainImage(newIndex)})}
            updateMainImage(0)}},themeSwitcher:{elements:{themeStylesheet:document.getElementById('themeStylesheet'),headerContent:document.querySelector('.header-content')},init(){const{themeStylesheet,headerContent}=this.elements;if(themeStylesheet&&headerContent){const themeToggle=document.createElement('button');themeToggle.className='theme-toggle';themeToggle.innerHTML='üåô';themeToggle.setAttribute('aria-label','Switch theme');themeToggle.style.cssText=`
                        background: none;
                        border: 1px solid var(--border);
                        border-radius: 4px;
                        width: 40px;
                        height: 40px;
                        cursor: pointer;
                        font-size: 1.2rem;
                        margin-left: 1rem;
                        transition: all ${EnjoyNowApp.config.animation.duration}ms ${EnjoyNowApp.config.animation.easing};
                    `;const nav=document.querySelector('.nav');if(nav){nav.appendChild(themeToggle)}else{headerContent.appendChild(themeToggle)}
            const currentTheme=localStorage.getItem('theme')||'dark';if(currentTheme==='light'){themeStylesheet.href=EnjoyNowApp.config.themes.light;themeToggle.innerHTML='‚òÄÔ∏è'}else{themeStylesheet.href=EnjoyNowApp.config.themes.dark;themeToggle.innerHTML='üåô'}
            themeToggle.addEventListener('click',()=>this.toggleTheme())}},toggleTheme(){const{themeStylesheet}=this.elements;const themeToggle=document.querySelector('.theme-toggle');const isLightTheme=themeStylesheet.href.includes('white-theme.css');if(isLightTheme){themeStylesheet.href=EnjoyNowApp.config.themes.dark;themeToggle.innerHTML='üåô';localStorage.setItem('theme','dark')}else{themeStylesheet.href=EnjoyNowApp.config.themes.light;themeToggle.innerHTML='‚òÄÔ∏è';localStorage.setItem('theme','light')}}},pagination:{elements:{paginationLinks:document.querySelectorAll('.pagination a')},init(){const{paginationLinks}=this.elements;paginationLinks.forEach(link=>{link.addEventListener('click',(e)=>this.handlePagination(e))})},handlePagination(e){e.preventDefault();const{paginationLinks}=this.elements;paginationLinks.forEach(link=>link.classList.remove('active'));e.target.classList.add('active');window.scrollTo({top:0,behavior:'smooth'});window.location.href=e.target.href}},lazyLoading:{init(){const images=document.querySelectorAll('img[data-src]');const observer=new IntersectionObserver((entries)=>{entries.forEach(entry=>{if(entry.isIntersecting){const img=entry.target;img.src=img.dataset.src;img.classList.remove('lazy');observer.unobserve(img)}})});images.forEach(img=>observer.observe(img))}},sidebarScroll:{sidebar:null,mainContent:null,footer:null,headerHeight:130,init({sidebarSelector='.sidebar',mainContentSelector='.main-content',footerSelector='.footer',headerHeight=130}={}){this.sidebar=document.querySelector(sidebarSelector);this.mainContent=document.querySelector(mainContentSelector);this.footer=document.querySelector(footerSelector);this.headerHeight=headerHeight;if(!this.sidebar||!this.mainContent)return;window.addEventListener('scroll',()=>this.update());window.addEventListener('resize',()=>this.update());window.addEventListener('load',()=>this.update());this.update()},update(){const sidebar=this.sidebar;const main=this.mainContent;const footer=this.footer;const isMobile=window.innerWidth<=768;if(isMobile){this.reset();return}
            const sidebarHeight=sidebar.offsetHeight;const mainHeight=main.offsetHeight;if(mainHeight<=sidebarHeight){this.reset();return}
            const scrollY=window.scrollY;const mainTop=main.getBoundingClientRect().top+scrollY;const footerTop=footer?footer.getBoundingClientRect().top+scrollY:Infinity;const bottomLimit=footerTop-sidebarHeight-20;if(scrollY+this.headerHeight<mainTop){sidebar.style.position='relative';sidebar.style.top='0'}else if(scrollY+this.headerHeight<bottomLimit){sidebar.style.position='fixed';sidebar.style.top=`${this.headerHeight}px`}else{sidebar.style.position='absolute';sidebar.style.top=`${bottomLimit - mainTop}px`}},reset(){if(this.sidebar){this.sidebar.style.position='relative';this.sidebar.style.top='0'}}},commentReply:{elements:{replyButtons:document.querySelectorAll('.reply-btn')},init(){const{replyButtons}=this.elements;replyButtons.forEach(button=>{button.addEventListener('click',()=>this.toggleReplyForm(button))})},toggleReplyForm(button){const commentId=button.closest('.review-item').dataset.commentId;const replyForm=document.getElementById(`reply-form-${commentId}`);if(replyForm){replyForm.style.display=replyForm.style.display==='none'?'block':'none'}}},init(){this.navigation.init();this.backToTop.init();this.gallerySlider.init();this.formValidator.init();this.attributes.init();this.loadMore.init();this.filters.init();this.smoothScroll.init();this.cookieBanner.init();this.profileGallery.init();this.themeSwitcher.init();this.pagination.init();this.lazyLoading.init();this.sidebarScroll.init();this.commentReply.init()}};document.addEventListener('DOMContentLoaded',()=>{EnjoyNowApp.init()});window.EnjoyNowApp=EnjoyNowApp})()
